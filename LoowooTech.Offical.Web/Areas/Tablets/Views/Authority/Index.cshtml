
@{
    ViewBag.Title = "授权文件";
    Layout = "~/Areas/Tablets/Views/Shared/_Layout.cshtml";
    List<Authority> list = ViewBag.List;
    AuthorityParameter parameter = ViewBag.Parameter;
    List<User> users = ViewBag.Users;
}

@section ButtonHead{
<div class="title-action">
    <a href="/Tablets/Authority/Create" class="btn btn-warning btn-outline" data-toggle="modal" data-target="#Modal"><i class="fa fa-shield"></i>授权文件</a>
</div>
    }


<div class="row">
    <div class="col-xs-3">
        <div class="ibox float-e-margins">
            <div class="ibox-content mailbox-content">
                <h2>查询设置</h2>
                <form method="get">
                    <div class="form-group">
                        <label class="control-label">上传者：</label>
                        <select class="form-control" name="UserId">
                            <option value="" @(parameter.UserId.HasValue?"":"selected=selected")>全部</option>
                            @foreach(var item in users)
                            {
                                <option value="@(item.ID)" @(parameter.UserId.HasValue&&parameter.UserId.Value==item.ID?"selected=selected":"")>@(item.Name)</option>
                            }
                        </select>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary"><i class="fa fa-search"></i>查询</button>
                        <button type="button" class="btn btn-white" onclick="history.back()"><i class="fa fa-arrow-left"></i>返回</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="col-xs-9 animated fadeInRight">
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>序号</th>
                    <th>文件名</th>
                    <th>上传者</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                @foreach(var item in list)
                {
                    <tr>
                        <td>@(item.ID)</td>
                        <td>@(item.Name)</td>
                        <td>@(item.User.Name)</td>
                        <td>
                            <a href="/@(item.FileInfo.Path)" target="_blank"><i class="fa fa-download"></i></a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>

        @{ 
            Html.RenderPartial("_pagination", parameter.Page as object);
        }
    </div>
</div>