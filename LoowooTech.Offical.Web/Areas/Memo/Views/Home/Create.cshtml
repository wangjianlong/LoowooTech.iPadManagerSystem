@{ 
    Layout = null;
    Note note = ViewBag.Note;
}
<script>
    $(function () {
        $("#form-note").submit(function () {
            var $btn = $("#form-note button");
            $btn.attr("disabled", "disabled");
            var data = $(this).serialize();
            $.request("/Memo/Home/save", data, function (json) {
                if (json.result == 1) {
                    alert("操作成功！");
                    location.href = "/Memo/Home/Index";
                } else {
                    alert(json.content);
                    $btn.removeAttr("disabled");
                }

            });
            return false;
        });
    });
</script>

<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
    <i class="fa @(note==null?"fa-plus-square":"fa-edit") modal-icon"></i>
    <h4 class="modal-title">@string.Format("{0}便签", note == null?"添加":"编辑")</h4>
</div>

<form class="form-horizontal" method="post" id="form-note">
    <div class="modal-body">
        <div class="form-group">
            <label class="control-label col-sm-3">标题：</label>
            <div class="col-sm-9">
                <input type="hidden" name="ID" value="@(note==null?0:note.ID)" />
                <input type="hidden" name="UserId" value="@(note==null?Identity.UserId:note.UserId)" />
                <input type="text" name="Title" class="form-control" placeholder="标题" value="@(note==null?"":note.Title)" required/>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-sm-3">内容：</label>
            <div class="col-sm-9">
                <textarea class="form-control" rows="4" name="Content" required>@(note==null?"":note.Content)</textarea>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="submit" class="btn btn-primary"><i class="fa fa-check"></i>确定</button>
        <button type="button" class="btn btn-white" data-dismiss="modal"><i class="fa fa-times"></i> 取消</button>
    </div>
</form>