@{ 
    Project project = ViewBag.Project;
    WorkSchedule schedule = ViewBag.Model;
    Layout = null;
}

<link rel="stylesheet" href="~/Content/css/plugins/jasny/jasny-bootstrap.min.css" />

<script src="~/scripts/plugins/jasny/jasny-bootstrap.min.js"></script>

<script>
    $(function(){

        var html = $("#add").html();
        $("button[name='AddFile']").click(function () {
            $("#files").append(html);
        });
    });
</script>

<div class="hidden">
    <div id="add">
        @*<div class="fileinput fileinput-new input-group" data-provides="fileinput">
            <div class="form-control" data-trigger="fileinput">
                <i class="glyphicon glyphicon-file fileinput-exists"></i>
                <span class="fileinput-filename"></span>
            </div>
            <span class="input-group-addon btn btn-default btn-file">
                <span class="fileinput-new">选择文件</span>
                <span class="fileinput-exists">更改</span>
                <input type="file" name="file" />
            </span>
            <a href="#" class="input-group-addon btn btn-default fileinput-exists" data-dismiss="fileinput">移除</a>
        </div>*@

        <input type="file" name="file" class="form-control" style="margin-bottom:5px;" />
    </div>
</div>

<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
    <h4 class="modal-title">@string.Format("{0}工作记录", schedule == null ? "添加" : "编辑")</h4>
</div>


<form class="form-horizontal" method="post" id="form-schedule" enctype="multipart/form-data" action="/Project/Schedule/Save">
    <div class="modal-body">
        <div class="form-group">
            <label class="control-label col-xs-3">录入人：</label>
            <div class="col-xs-9">
                <input type="text" class="form-control" name="" readonly value="@(schedule==null? Identity.Name:schedule.User.Name)" />
                <input type="hidden" name="UserId" value="@(schedule==null?Identity.UserId:Identity.UserId)" />
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-xs-3">项目名称：</label>
            <div class="col-xs-9">
                <input type="text" class="form-control" name="" readonly value="@(schedule==null?project==null?"未获取":project.Name:schedule.Project.Name)" />
                <input type="hidden" name="ProjectId" value="@(schedule==null?project==null?0:project.ID:schedule.ProjectId)" />
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-xs-3">内容：</label>
            <div class="col-xs-9">
                <textarea class="form-control" rows="3" name="Content"></textarea>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-xs-3">附件：</label>
            <div class="col-xs-9">
                <button type="button" class="btn btn-white" name="AddFile"><i class="fa fa-plus"></i>添加附件</button>
                <div class="hr-line-dashed"></div>
                <div id="files">
                </div>
            </div>
        </div>

    </div>


    <div class="modal-footer">
        <button type="submit" class="btn btn-primary"><i class="fa fa-check"></i>确定</button>
        <button type="button" class="btn btn-white" data-dismiss="modal"><i class="fa fa-times"></i> 取消</button>
    </div>
</form>